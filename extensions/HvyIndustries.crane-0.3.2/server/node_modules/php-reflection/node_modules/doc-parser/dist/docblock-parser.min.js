require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var Lexer=function(tokens){this._t=tokens},lexerSymbols=[",","=",":","(",")","[","]","{","}","@"],lexerWhiteSpace=[" ","\t","\r","\n"];Lexer.prototype.read=function(input){this._input=input,this.offset=0,this.text="",this.token=null},Lexer.prototype.input=function(){return this.offset<this._input.length?(this.ch=this._input[this.offset++],this.text+=this.ch,this.ch):null},Lexer.prototype.unput=function(){this.offset--,this.text=this.text.substring(0,this.text.length-1)},Lexer.prototype.unlex=function(){return this.offset=this.__offset,
this.text=this.__text,this.token=this.__token,this.token},Lexer.prototype.lex=function(){for(this.__offset=this.offset,this.__text=this.text,this.__token=this.token,this.token=this.next();this.token===this._t.T_WHITESPACE;)this.token=this.next();return this.token},Lexer.prototype.next=function(){this.text="";var ch=this.input();if(null===ch)return this._t.T_EOF;if('"'===ch||"'"===ch){var tKey=ch;do ch=this.input(),"\\"===ch&&this.input();while(ch!==tKey&&this.offset<this._input.length);return this._t.T_TEXT}if(lexerSymbols.indexOf(ch)>-1)return":"===ch&&(ch="=>"),"="===ch&&">"===this._input[this.offset]&&(ch+=this.input()),ch;if(lexerWhiteSpace.indexOf(ch)>-1){for(ch=this.input();lexerWhiteSpace.indexOf(ch)>-1;)ch=this.input();return null!==ch&&this.unput(),this._t.T_WHITESPACE}if(ch=ch.charCodeAt(0),ch>47&&ch<58){for(;ch>47&&ch<58&&null!==ch;)ch=this.input(),null!==ch&&(ch=ch.charCodeAt(0));return null!==ch&&this.unput(),this._t.T_NUM}do if(ch=this.input(),lexerSymbols.indexOf(ch)>-1||lexerWhiteSpace.indexOf(ch)>-1){
this.unput();break}while(this.offset<this._input.length);return this._t.T_STRING},module.exports=Lexer},{}],2:[function(require,module,exports){"use strict";var Parser=(require("./token"),require("./lexer"),function(lexer){this.lexer=lexer});Parser.prototype.parse=function(input){var ast=[];for(this.lexer.read(input),this.token=this.lexer.lex();this.token!==this.lexer._t.T_EOF;){var node=this.body();node&&ast.push(node),this.token=this.lexer.lex()}return ast},Parser.prototype.body=function(){if(this.token===this.lexer._t.T_STRING){if("true"===this.lexer.text)return["boolean",!0];if("false"===this.lexer.text)return["boolean",!1];if("null"===this.lexer.text)return["null"];if("array"===this.lexer.text){if(this.token=this.lexer.lex(),"("===this.token){var result=["array"];return result.push(this.read_array(")")),result}return this.token=this.lexer.unlex(),["type",this.lexer.text]}var name=this.lexer.text;if(this.token=this.lexer.lex(),"="===this.token||"=>"===this.token)return this.token=this.lexer.lex(),["key",name,this.get_json_value(this.body())];
if("("===this.token){var result=["method",name,[]];do{this.token=this.lexer.lex();var item=this.body();null!==item&&result[2].push(item)}while(")"!==this.token&&this.token!==this.lexer._t.T_EOF);return result}return this.token=this.lexer.unlex(),["type",name]}if(this.token===this.lexer._t.T_TEXT)return["text",this.lexer.text];if(this.token===this.lexer._t.T_NUM)return["number",this.lexer.text];if("["===this.token){var result=["array"];return result.push(this.read_array("]")),result}if("{"===this.token){var result=["json"];return result.push(this.read_json()),result}if("@"===this.token){if(this.token=this.lexer.lex(),this.token===this.lexer._t.T_STRING){var result=["annotation",this.lexer.text,[]];if(this.token=this.lexer.lex(),"("===this.token){do{this.token=this.lexer.lex();var item=this.body();null!==item&&result[2].push(item)}while(")"!==this.token&&this.token!==this.lexer._t.T_EOF)}else this.token=this.lexer.unlex();return result}return this.token=this.lexer.unlex(),null}return null},Parser.prototype.read_array=function(endChar){
var result=[];do{this.token=this.lexer.lex();var item=this.body();null!==item&&(this.token=this.lexer.lex(),item=this.get_json_value(item),"=>"===this.token&&(this.token=this.lexer.lex(),item=["key",item,this.get_json_value(this.body())],this.token=this.lexer.lex()),","!==this.token&&(this.token=this.lexer.unlex()),result.push(item))}while(this.token!==endChar&&this.token!==this.lexer._t.T_EOF);return result},Parser.prototype.read_json=function(endChar){var result={};do{this.token=this.lexer.lex();var item=this.body();null!==item&&(this.token=this.lexer.lex(),"=>"===this.token&&(item=this.get_json_key(item),null!==item&&(this.token=this.lexer.lex(),result[item]=this.get_json_value(this.body())),this.token=this.lexer.lex()),","!==this.token&&(this.token=this.lexer.unlex()))}while("}"!==this.token&&this.token!==this.lexer._t.T_EOF);return this.token=this.lexer.lex(),result},Parser.prototype.get_json_value=function(ast){if(!ast)return null;var result=this.get_json_key(ast);return null===result&&("json"===ast[0]?result=ast[1]:"array"===ast[0]?(result=[],
ast[1].forEach(function(item){result.push(this.get_json_value(item))}.bind(this))):result=ast),result},Parser.prototype.get_json_key=function(ast){if("text"!==ast[0])return"number"===ast[0]?JSON.parse(ast[1]):"type"===ast[0]||"boolean"===ast[0]?ast[1]:null;var result=ast[1].substring(1,ast[1].length-1);try{return JSON.parse('"'+result+'"')}catch(e){return result}},module.exports=Parser},{"./lexer":1,"./token":3}],3:[function(require,module,exports){"use strict";module.exports={T_EOF:1,T_WHITESPACE:2,T_TEXT:3,T_STRING:4,T_NUM:5}},{}],"docblock-parser":[function(require,module,exports){"use strict";var token=require("./token"),Lexer=require("./lexer"),Parser=require("./parser"),API=function(){this.token=token,this.lexer=new Lexer(this.token),this.parser=new Parser(this.lexer)};API.prototype.parse=function(input){return this.parser.parse(input)},module.exports=API},{"./lexer":1,"./parser":2,"./token":3}]},{},[]);
//# sourceMappingURL=docblock-parser.min.js.map